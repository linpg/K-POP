<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>K-POP å¥³åœ˜çµ‚æ¥µçŒœè¬æŒ‘æˆ°</title>
    <style>
        /* ==================== CSS æ¨£å¼å€ ==================== */
        :root {
            --primary-color: #ff4081;
            --secondary-color: #c51162;
            --accent-color: #aa00ff;
            --bg-gradient: linear-gradient(135deg, #f8bbd0 0%, #e1bee7 100%);
            --card-bg: rgba(255, 255, 255, 0.95);
            --text-color: #333;
        }

        body {
            font-family: "Segoe UI", "Microsoft JhengHei", sans-serif;
            background: var(--bg-gradient);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }

        .container {
            background: var(--card-bg);
            width: 100%;
            max-width: 650px;
            padding: 35px;
            border-radius: 25px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
            text-align: center;
            position: relative;
            min-height: 550px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            backdrop-filter: blur(5px);
        }

        h1 {
            color: var(--secondary-color);
            margin-bottom: 5px;
            font-size: 2rem;
        }

        h2 {
            color: var(--primary-color);
            font-size: 1.2rem;
            margin-top: 0;
        }

        /* æŒ‰éˆ•é€šç”¨æ¨£å¼ */
        button {
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-family: inherit;
            transition: all 0.2s ease;
        }

        /* é›£åº¦é¸æ“‡æŒ‰éˆ• */
        .mode-btn {
            display: block;
            width: 100%;
            padding: 18px;
            margin: 12px 0;
            font-size: 1.2rem;
            font-weight: bold;
            color: white;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }

        .mode-easy { background: linear-gradient(45deg, #4caf50, #81c784); }
        .mode-normal { background: linear-gradient(45deg, #2196f3, #64b5f6); }
        .mode-hard { background: linear-gradient(45deg, #f44336, #e91e63); }

        .mode-btn:hover { transform: scale(1.03); box-shadow: 0 8px 20px rgba(0,0,0,0.2); }

        /* éŠæˆ²ä»‹é¢ */
        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #eee;
        }

        .badge {
            background: var(--accent-color);
            color: white;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.9rem;
        }

        .q-type-label {
            font-weight: bold;
            color: var(--secondary-color);
            text-transform: uppercase;
            font-size: 0.85rem;
            letter-spacing: 1px;
        }

        /* é¡Œç›®é¡¯ç¤ºå€ */
        .question-area {
            min-height: 150px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin-bottom: 25px;
        }

        .q-content {
            font-size: 1.3rem;
            line-height: 1.5;
            font-weight: bold;
            color: #444;
        }

        /* ç‰¹æ®Šé¡Œç›®æ¨£å¼ */
        .type-emoji .q-content { font-size: 4rem; letter-spacing: 10px; }
        .type-lyrics .q-content { font-style: italic; color: #555; font-family: "Georgia", serif; font-size: 1.5rem; }
        .type-lyrics .q-content::before { content: "ğŸµ "; }
        .type-lyrics .q-content::after { content: " ğŸµ"; }
        .type-body .q-content { color: #d81b60; font-size: 1.8rem; }
        .sub-text { font-size: 0.9rem; color: #888; margin-top: 10px; font-weight: normal; }

        /* é¸é …å€ */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .option-btn {
            background: white;
            border: 2px solid var(--primary-color);
            color: var(--text-color);
            padding: 15px;
            border-radius: 15px;
            font-size: 1rem;
            font-weight: 600;
        }

        .option-btn:hover:not([disabled]) {
            background: var(--primary-color);
            color: white;
            transform: translateY(-3px);
        }

        .option-btn.correct { background: #4caf50 !important; border-color: #4caf50 !important; color: white !important; }
        .option-btn.wrong { background: #f44336 !important; border-color: #f44336 !important; color: white !important; }
        .option-btn:disabled { opacity: 0.7; cursor: default; }

        /* è§£æå€ */
        .feedback-section {
            margin-top: 20px;
            padding: 15px;
            background: #fff0f5;
            border-radius: 15px;
            border-left: 5px solid var(--secondary-color);
            text-align: left;
            animation: slideUp 0.4s;
            display: none;
        }

        .next-btn, .home-btn {
            background: var(--accent-color);
            color: white;
            padding: 12px 35px;
            font-size: 1.1rem;
            margin-top: 15px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

        .hidden { display: none !important; }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @media (max-width: 480px) {
            .options-grid { grid-template-columns: 1fr; }
            .container { padding: 20px; }
            .type-emoji .q-content { font-size: 3rem; }
        }
    </style>
</head>
<body>

    <div class="container">
        <div id="start-screen">
            <h1>K-POP å¥³åœ˜çŒœè¬</h1>
            <h2>è«‹é¸æ“‡æŒ‘æˆ°é›£åº¦</h2>
            <div style="margin: 30px 0;">
                <button class="mode-btn mode-easy" onclick="startGame('easy')">
                    ğŸ£ èœé› (ç°¡å–®æ¨¡å¼)<br>
                    <span style="font-size:0.8rem; font-weight:normal;">ç´”æ–‡å­—æè¿°ãƒ»é©åˆè·¯äººç²‰</span>
                </button>
                <button class="mode-btn mode-normal" onclick="startGame('normal')">
                    ğŸ˜ æˆ‘é‚„è¡Œ (æ™®é€šæ¨¡å¼)<br>
                    <span style="font-size:0.8rem; font-weight:normal;">æ–‡å­— + Emoji åœ–ç¤ºé¡Œãƒ»é©åˆä¸€èˆ¬ç²‰</span>
                </button>
                <button class="mode-btn mode-hard" onclick="startGame('hard')">
                    ğŸ˜ˆ æˆ‘å…¨éƒ½è¦ (å›°é›£æ¨¡å¼)<br>
                    <span style="font-size:0.8rem; font-weight:normal;">æ–‡å­— + åœ–ç¤º + æ­Œè© + èº«é«”ç‰¹å¾µãƒ»çœŸæ„›ç²‰å°ˆå±¬</span>
                </button>
            </div>
        </div>

        <div id="game-screen" class="hidden">
            <div class="game-header">
                <span class="badge">Q <span id="q-current">1</span>/<span id="q-total">10</span></span>
                <span id="q-type" class="q-type-label">é¡å‹</span>
            </div>

            <div class="question-area" id="q-area">
                <div id="q-content" class="q-content"></div>
                <div id="q-sub" class="sub-text"></div>
            </div>
            
            <div class="options-grid" id="options-container"></div>

            <div class="feedback-section" id="feedback">
                <strong id="feedback-title" style="font-size: 1.1rem;"></strong>
                <p id="feedback-detail" style="margin: 5px 0 0 0; color: #555;"></p>
                <div style="text-align: center;">
                    <button class="next-btn" onclick="nextQuestion()">ä¸‹ä¸€é¡Œ â¡</button>
                </div>
            </div>
        </div>

        <div id="end-screen" class="hidden">
            <h1>æŒ‘æˆ°çµæŸï¼</h1>
            <p>é›£åº¦ï¼š<span id="end-mode" style="font-weight:bold; color:var(--accent-color)"></span></p>
            <div style="font-size: 4rem; margin: 10px 0;">ğŸ†</div>
            <h2 style="font-size: 2.5rem; color: var(--primary-color); margin: 0;">
                <span id="final-score">0</span> / <span id="total-score">0</span>
            </h2>
            <p id="result-comment" style="margin: 20px 0; font-weight: bold; font-size: 1.1rem;"></p>
            <button class="home-btn" onclick="location.reload()">å›åˆ°ä¸»é¸å–® ğŸ </button>
        </div>
    </div>

    <script>
        /* ==================== è³‡æ–™åº« ==================== */
        // type: 'desc' (æ–‡å­—), 'emoji' (åœ–ç¤º), 'lyrics' (æ­Œè©), 'body' (èº«é«”éƒ¨ä½)
        const fullDatabase = [
            // --- ç°¡å–®æ¨¡å¼ (æ–‡å­—æè¿°) ---
            { type: 'desc', q: "ä¾†è‡ªæ³°åœ‹ï¼ŒBLACKPINK çš„èˆè¹ˆæ©Ÿå™¨ï¼Œæ“”ä»»éã€Šé’æ˜¥æœ‰ä½ ã€‹å°å¸«ã€‚", a: 1, opts: ["Minnie", "Lisa", "Natty", "Sorn"], exp: "Lisa æ˜¯å…¬èªçš„é ‚ç´šèˆè€…èˆ‡å°å¸«ã€‚" },
            { type: 'desc', q: "aespa çš„éšŠé•·ï¼Œæ“æœ‰ã€ŒAI å»ºæ¨¡è‡‰ã€ï¼Œå˜´è§’æœ‰é¡†æ¨™èªŒæ€§çš„ç—£ã€‚", a: 0, opts: ["Karina", "Winter", "Yeji", "Irene"], exp: "Karina (åŠ‰çŸ¥ç‰) ä»¥å…¶å®Œç¾çš„ AI è‡‰è›‹è‘—ç¨±ã€‚" },
            { type: 'desc', q: "TWICE çš„å°ç£æˆå“¡ï¼Œå°„ç®­åå ´é¢ç´…éå…¨çƒï¼ŒéšŠå…§å¿™å…§ã€‚", a: 2, opts: ["Shuhua", "Handong", "Tzuyu", "YangYang"], exp: "å‘¨å­ç‘œ (Tzuyu) æ˜¯ TWICE çš„é–€é¢èˆ‡å¿™å…§ã€‚" },
            { type: 'desc', q: "IVE æˆå“¡ï¼Œå‰ IZ*ONE Cä½ï¼Œä»¥ã€Œè½‰åœˆã€è¿·å› å’Œé€†å¤©é•·è…¿èåã€‚", a: 3, opts: ["Yujin", "Somi", "Sullyoon", "Wonyoung"], exp: "å¼µå“¡ç‘› (Wonyoung) çš„è½‰åœˆæŒ‘æˆ°éå¸¸æµè¡Œã€‚" },
            { type: 'desc', q: "(G)I-DLE çš„éšŠé•·ï¼Œå¤©æ‰è£½ä½œäººï¼Œå‰µä½œäº†ã€ŠTomboyã€‹ã€ã€ŠQueencardã€‹ã€‚", a: 1, opts: ["Minnie", "Soyeon", "Yuqi", "Miyeon"], exp: "ç”°å°å¨Ÿ (Soyeon) æ˜¯ K-pop å°‘è¦‹çš„å…¨èƒ½è£½ä½œäººã€‚" },
            { type: 'desc', q: "NewJeans çš„è¶Šå—æ¾³ç±æˆå“¡ï¼ŒGUCCI å“ç‰Œå¤§ä½¿ï¼Œèªªè©±è»ŸèŒã€‚", a: 0, opts: ["Hanni", "Minji", "Danielle", "Hyein"], exp: "Hanni æ˜¯ NewJeans çš„æ ¸å¿ƒæˆå“¡ä¹‹ä¸€ã€‚" },
            { type: 'desc', q: "ITZY çš„éšŠé•·ï¼Œæ“æœ‰æ¥µå…·è¾¨è­˜åº¦çš„ã€Œè²“ç›¸ã€èˆ‡é›™é¦¬å°¾é€ å‹ã€‚", a: 2, opts: ["Ryujin", "Yuna", "Yeji", "Lia"], exp: "Yeji (ç¦®å¿—) æ˜¯æœ€è‘—åçš„è²“ç›¸å¶åƒä¹‹ä¸€ã€‚" },
            { type: 'desc', q: "MAMAMOO çš„éšŠé•·ï¼Œä»¥ã€ŒåCDã€çš„å”±åŠŸå’Œ YouTube é »é“èåã€‚", a: 3, opts: ["Moonbyul", "Wheein", "Hwasa", "Solar"], exp: "Solar (é Œæ¨‚) å”±åŠŸæ¥µä½³ä¸”ç¶“ç‡Ÿé »é“æœ‰æˆã€‚" },
            { type: 'desc', q: "Red Velvet çš„é–€é¢ï¼Œè¢«è­½ç‚ºã€Œé¡å€¼æ•™ç§‘æ›¸ã€ï¼Œæ°£è³ªé«˜å†·ã€‚", a: 0, opts: ["Irene", "Joy", "Seulgi", "Yeri"], exp: "Irene æ˜¯ K-pop ä¸‰ä»£å¥³åœ˜çš„é¡å€¼å±±è„ˆã€‚" },
            { type: 'desc', q: "LE SSERAFIM çš„å¤§å§ï¼Œå‰ HKT48ã€IZ*ONE æˆå“¡ï¼ŒéŠæˆ²å®…å¥³ã€‚", a: 1, opts: ["Chaewon", "Sakura", "Kazuha", "Eunchae"], exp: "å®®è„‡å’²è‰¯ (Sakura) å‡ºé“ç¶“æ­·è±å¯Œä¸”ç†±æ„›éŠæˆ²ã€‚" },
            
            // --- æ™®é€šæ¨¡å¼ (Emoji åœ–ç¤º) ---
            { type: 'emoji', q: "ğŸ°ğŸ¦·ğŸ¤", sub: "çŒœä¸€ä½å¶åƒ (é—œéµå­—: å…”å­/ç‰™é½’/Solo)", a: 0, opts: ["Nayeon", "Jihyo", "Yujin", "Chuu"], exp: "TWICE å¨œç’‰çš„æ¨™èªŒå°±æ˜¯å¯æ„›çš„å…”ç‰™ã€‚" },
            { type: 'emoji', q: "ğŸ¥ŸğŸ‘‘ğŸ’…", sub: "çŒœä¸€ä½å¶åƒ (é—œéµå­—: é¤ƒå­/æ™‚å°š/é¦™å¥ˆå…’)", a: 2, opts: ["Ningning", "Minnie", "Jennie", "Jessica"], exp: "Jennie è‡‰é °è‚‰è‚‰æ™‚è¢«ç¨±ç‚ºã€Œäººé–“é¤ƒå­ã€ã€‚" },
            { type: 'emoji', q: "â„ï¸â­ï¸ğŸ•", sub: "çŒœä¸€ä½å¶åƒ (é—œéµå­—: å†¬å¤©/æ˜Ÿæ˜Ÿ/ç‹—ç‹—ç›¸)", a: 1, opts: ["Gaeul", "Winter", "Haewon", "Liz"], exp: "aespa Winter (é‡‘æ—¼ç‚¡) è—åæ˜¯å†¬å¤©ï¼Œæœ‰é¦¬çˆ¾æ¿Ÿæ–¯ç›¸ã€‚" },
            { type: 'emoji', q: "ğŸŒ¹ğŸ‡¦ğŸ‡ºğŸ¸", sub: "çŒœä¸€ä½å¶åƒ (é—œéµå­—: ç«ç‘°/æ¾³æ´²/å‰ä»–)", a: 3, opts: ["Lily", "Wendy", "Danielle", "RosÃ©"], exp: "BLACKPINK RosÃ© ä¾†è‡ªæ¾³æ´²ï¼Œæ“…é•·å‰ä»–ã€‚" },
            { type: 'emoji', q: "ğŸ’ƒğŸ¥ƒğŸ¶", sub: "çŒœä¸€ä½å¶åƒ (é—œéµå­—: é…’ç²¾/ShyShyShy)", a: 0, opts: ["Sana", "Momo", "Mina", "Kazuha"], exp: "TWICE Sana æ˜¯ã€ŠAlcohol-Freeã€‹å’Œ ShyShyShy çš„ä»£è¡¨ã€‚" },
            { type: 'emoji', q: "ğŸ¦¢ğŸ©°ğŸ’ª", sub: "çŒœä¸€ä½å¶åƒ (é—œéµå­—: å¤©éµ/èŠ­è•¾/è…¹è‚Œ)", a: 2, opts: ["Mina", "Tsuki", "Kazuha", "Xiaoting"], exp: "LE SSERAFIM Kazuha æ˜¯èŠ­è•¾èˆå°ˆæ¥­å‡ºèº«ã€‚" },
            { type: 'emoji', q: "ğŸ»ğŸ§¸ğŸ¯", sub: "çŒœä¸€ä½å¶åƒ (é—œéµå­—: ç†Š/èœ‚èœœ/å‘†èŒ)", a: 1, opts: ["Irene", "Seulgi", "Joy", "Wendy"], exp: "Red Velvet Seulgi çš„ä»£è¡¨å‹•ç‰©æ˜¯ç†Šã€‚" },
            { type: 'emoji', q: "ğŸ¦’ğŸ¶ğŸ¤", sub: "çŒœä¸€ä½å¶åƒ (é—œéµå­—: ç‹—ç‹—/ç¶œè—/åœ°çƒå¨›æ¨‚å®¤)", a: 2, opts: ["Mimi", "LeeYoungJi", "Yujin", "Jisoo"], exp: "IVE å®‰å…ªçœŸåœ¨ç¶œè—è£¡è¡¨ç¾å‡ºç˜‹ç‹‚çš„ç‹—ç‹—é­…åŠ›ã€‚" },

            // --- å›°é›£æ¨¡å¼ (æ­Œè© & èº«é«”éƒ¨ä½) ---
            { type: 'lyrics', q: "I'm a queencard, I'm a queencard~", sub: "çŒœé€™å¥æ­Œè©çš„ä¸­å¿ƒäººç‰©/è£½ä½œäºº", a: 0, opts: ["Soyeon", "Miyeon", "Shuhua", "Minnie"], exp: "é€™æ˜¯ (G)I-DLE éšŠé•· Soyeon çš„ç¶“å…¸æ­Œè©ã€‚" },
            { type: 'lyrics', q: "Look at you, now look at me.", sub: "çŒœé€™å¥ Killing Part çš„æ¼”å”±è€…", a: 3, opts: ["Jennie", "Jisoo", "RosÃ©", "Lisa"], exp: "BLACKPINKã€ŠHow You Like Thatã€‹ä¸­ Lisa çš„é–‹é ­ã€‚" },
            { type: 'lyrics', q: "Next Level ~", sub: "çŒœé€™é¦–æ­Œçš„åŸå”±åœ˜é«”æˆ–æ ¸å¿ƒæˆå“¡", a: 1, opts: ["ITZY", "aespa", "NMIXX", "STAYC"], exp: "aespa çš„æˆåæ›²ã€ŠNext Levelã€‹ã€‚" },
            { type: 'lyrics', q: "Wannabe me, me, me ~", sub: "çŒœé€™é¦–æ­Œã€ŒæŠ–è‚©èˆã€çš„ä¸­å¿ƒæˆå“¡", a: 2, opts: ["Yeji", "Yuna", "Ryujin", "Chaeryeong"], exp: "ITZY Ryujin çš„æŠ–è‚©èˆæ˜¯ç¶“å…¸ã€‚" },
            { type: 'lyrics', q: "Shy Shy Shy", sub: "çŒœé€™å¥å‚³å¥‡æ’’å¬Œæ­Œè©çš„æˆå“¡", a: 0, opts: ["Sana", "Nayeon", "Tzuyu", "Dahyun"], exp: "TWICE Sana åœ¨ã€ŠCheer Upã€‹ä¸­çš„æ­Œè©ã€‚" },
            { type: 'lyrics', q: "I am Fearless, huh?", sub: "çŒœé€™é¦–æ­Œçš„æ‰€å±¬åœ˜é«”", a: 1, opts: ["IVE", "LE SSERAFIM", "NewJeans", "Kep1er"], exp: "LE SSERAFIM çš„åœ˜åå«ç¾©ç‚º Fearlessã€‚" },
            
            { type: 'body', q: "ç‰¹å¾µï¼šåå“è…¹è‚Œ (11å­—)", sub: "é€™ä½æˆå“¡ä»¥èŠ­è•¾åº•å­ç·´å‡ºçš„è…¹è‚Œèå", a: 2, opts: ["Momo", "Solar", "Kazuha", "Jihyo"], exp: "LE SSERAFIM Kazuha çš„è…¹è‚Œéå¸¸æœ‰åã€‚" },
            { type: 'body', q: "ç‰¹å¾µï¼šè²“ç³»çœ¼ç› + å˜´è§’çš„ç—£", sub: "æ³¨æ„ï¼šæ˜¯è²“ç³»ï¼Œä¸æ˜¯è›‡ç³»", a: 3, opts: ["Soojin", "Haerin", "Yeji", "Karina"], exp: "Karina å˜´è§’æœ‰ç—£ï¼ŒYeji ä¸»è¦æ˜¯çœ¼ç›ï¼ŒHaerin æ˜¯è²“è€³ã€‚" },
            { type: 'body', q: "ç‰¹å¾µï¼šå…”ç‰™", sub: "ç¬‘èµ·ä¾†éå¸¸æ˜é¡¯çš„å…©é¡†é–€ç‰™", a: 0, opts: ["Nayeon", "Yujin (CLC)", "Moonbyul", "Sunmi"], exp: "TWICE å¨œç’‰æ˜¯å…”ç‰™å¶åƒçš„ä»£åè©ã€‚" },
            { type: 'body', q: "ç‰¹å¾µï¼šç›´è§’è‚© (90åº¦)", sub: "ç©¿éœ²è‚©è£éå¸¸å¥½çœ‹ï¼Œäººé–“é¦™å¥ˆå…’", a: 1, opts: ["Lia", "Jennie", "Chaeyoung", "Tzuyu"], exp: "Jennie çš„ç›´è§’è‚©æ˜¯æ™‚å°šç•Œçš„ç¯„æœ¬ã€‚" },
            { type: 'body', q: "ç‰¹å¾µï¼šæ¥µé•·è…¿ (107cm)", sub: "è¢«ç¨±ç‚ºã€Œåƒç¾å°‘å¥³æˆ°å£«ä¸€æ¨£çš„èº«æã€", a: 2, opts: ["Sowon", "Nana", "Wonyoung", "Yuna"], exp: "IVE å¼µå“¡ç‘›çš„è…¿é•·æ¯”ä¾‹é©šäººã€‚" }
        ];

        /* ==================== éŠæˆ²é‚è¼¯ ==================== */
        let currentQuestions = [];
        let currentIndex = 0;
        let score = 0;
        let currentMode = '';

        const screens = {
            start: document.getElementById('start-screen'),
            game: document.getElementById('game-screen'),
            end: document.getElementById('end-screen')
        };

        const ui = {
            qCurrent: document.getElementById('q-current'),
            qTotal: document.getElementById('q-total'),
            qType: document.getElementById('q-type'),
            qContent: document.getElementById('q-content'),
            qSub: document.getElementById('q-sub'),
            qArea: document.getElementById('q-area'),
            options: document.getElementById('options-container'),
            feedback: document.getElementById('feedback'),
            feedbackTitle: document.getElementById('feedback-title'),
            feedbackDetail: document.getElementById('feedback-detail')
        };

        // äº‚æ•¸æ´—ç‰Œå‡½æ•¸
        function shuffle(array) {
            return array.sort(() => Math.random() - 0.5);
        }

        // é–‹å§‹éŠæˆ²ï¼šæ ¹æ“šé›£åº¦ç¯©é¸é¡Œç›®
        function startGame(mode) {
            currentMode = mode;
            score = 0;
            currentIndex = 0;
            
            let pool = [];
            
            if (mode === 'easy') {
                // ç°¡å–®ï¼šåªé¸æè¿°é¡Œ (desc)
                pool = fullDatabase.filter(i => i.type === 'desc');
                // å– 10 é¡Œ
                currentQuestions = shuffle(pool).slice(0, 10);
            } else if (mode === 'normal') {
                // æ™®é€šï¼šæè¿°(desc) + åœ–ç¤º(emoji)
                const desc = fullDatabase.filter(i => i.type === 'desc');
                const emoji = fullDatabase.filter(i => i.type === 'emoji');
                // å„å–ä¸€äº›æ··åˆ
                pool = [...shuffle(desc).slice(0, 7), ...shuffle(emoji).slice(0, 8)];
                currentQuestions = shuffle(pool);
            } else {
                // å›°é›£ï¼šå…¨éƒ¨é¡å‹
                pool = fullDatabase;
                // å– 20 é¡Œï¼Œç›¡é‡åŒ…å«å„ç¨®é¡å‹
                currentQuestions = shuffle(pool).slice(0, 20);
            }

            // åˆ‡æ›ç•«é¢
            screens.start.classList.add('hidden');
            screens.end.classList.add('hidden');
            screens.game.classList.remove('hidden');
            
            loadQuestion();
        }

        function loadQuestion() {
            const data = currentQuestions[currentIndex];
            
            // æ›´æ–°è¨ˆæ•¸å™¨
            ui.qCurrent.textContent = currentIndex + 1;
            ui.qTotal.textContent = currentQuestions.length;
            
            // è¨­å®šé¡å‹æ¨™ç±¤èˆ‡æ¨£å¼
            ui.qArea.className = 'question-area'; // é‡ç½® class
            ui.qContent.textContent = data.q;
            ui.qSub.textContent = data.sub || ""; // å¦‚æœæœ‰å‰¯æ¨™é¡Œæ‰é¡¯ç¤º

            let typeName = "";
            if (data.type === 'desc') { typeName = "æ–‡å­—ç·šç´¢"; ui.qArea.classList.add('type-desc'); }
            if (data.type === 'emoji') { typeName = "Emoji çŒœè¬"; ui.qArea.classList.add('type-emoji'); }
            if (data.type === 'lyrics') { typeName = "æ­Œè©çŒœè¬"; ui.qArea.classList.add('type-lyrics'); }
            if (data.type === 'body') { typeName = "èº«é«”ç‰¹å¾µ"; ui.qArea.classList.add('type-body'); }
            
            ui.qType.textContent = typeName;

            // é‡ç½®é¸é …å€
            ui.options.innerHTML = '';
            ui.feedback.style.display = 'none';

            // ç”¢ç”Ÿé¸é …æŒ‰éˆ•
            data.opts.forEach((optText, idx) => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.textContent = optText;
                btn.onclick = () => checkAnswer(idx, btn);
                ui.options.appendChild(btn);
            });
        }

        function checkAnswer(selectedIndex, btn) {
            const data = currentQuestions[currentIndex];
            const allBtns = document.querySelectorAll('.option-btn');
            
            // é–å®šæŒ‰éˆ•
            allBtns.forEach(b => b.disabled = true);

            if (selectedIndex === data.a) {
                score++;
                btn.classList.add('correct');
                ui.feedbackTitle.innerHTML = '<span style="color:green">âœ… æ­£ç¢ºï¼</span>';
            } else {
                btn.classList.add('wrong');
                allBtns[data.a].classList.add('correct');
                ui.feedbackTitle.innerHTML = '<span style="color:red">âŒ å¯æƒœï¼æ­£ç¢ºç­”æ¡ˆæ˜¯...</span>';
            }

            ui.feedbackDetail.textContent = data.exp;
            ui.feedback.style.display = 'block';
        }

        function nextQuestion() {
            currentIndex++;
            if (currentIndex < currentQuestions.length) {
                loadQuestion();
            } else {
                endGame();
            }
        }

        function endGame() {
            screens.game.classList.add('hidden');
            screens.end.classList.remove('hidden');

            document.getElementById('final-score').textContent = score;
            document.getElementById('total-score').textContent = currentQuestions.length;
            
            let modeText = "";
            if (currentMode === 'easy') modeText = "ç°¡å–®æ¨¡å¼ (èœé›)";
            if (currentMode === 'normal') modeText = "æ™®é€šæ¨¡å¼ (æˆ‘é‚„è¡Œ)";
            if (currentMode === 'hard') modeText = "å›°é›£æ¨¡å¼ (æˆ‘å…¨éƒ½è¦)";
            document.getElementById('end-mode').textContent = modeText;

            // è©•èªé‚è¼¯
            const percent = score / currentQuestions.length;
            const comment = document.getElementById('result-comment');
            
            if (percent === 1) {
                comment.textContent = "å¤ªç¥å•¦ï¼è«‹æ”¶ä¸‹æˆ‘çš„è†è“‹ï¼ğŸ‘‘";
            } else if (percent >= 0.8) {
                comment.textContent = "ä¸æ„§æ˜¯è³‡æ·± K-pop åšå£«ï¼ğŸ“";
            } else if (percent >= 0.6) {
                comment.textContent = "æˆç¸¾ä¸éŒ¯ï¼å°å¥³åœ˜å¾ˆæœ‰ç ”ç©¶å–”ï¼ğŸ’–";
            } else {
                comment.textContent = "åŠ æ²¹ï¼å›å»å¤šåˆ·å¹¾å€‹ç›´æ‹å†ä¾†æŒ‘æˆ°ï¼ğŸ“º";
            }
        }
    </script>
</body>
</html>
